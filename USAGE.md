# TUI 使用指南

## 快捷键

### 终端快捷键

Oxide CLI 运行在终端环境中，支持标准的终端快捷键：

- `Ctrl+C` - 强制终止程序（推荐使用 `/exit` 优雅退出）
- `Ctrl+D` - 发送 EOF（End of File），通常会导致程序退出
- `Ctrl+L` - 清空终端屏幕（不会清除对话历史）
- `Ctrl+U` - 清除当前输入行的内容
- `Ctrl+A` - 移动光标到行首
- `Ctrl+E` - 移动光标到行末
- `Ctrl+T` - 显示/隐藏工具面板
- `Home` - 滚动到顶部
- `End` - 滚动到底部

### 斜杠命令

- `/clear` - 清空对话历史，重置会话
- `/exit` - 优雅退出程序

## 使用示例

### 基本对话

1. 运行 `oxide` 进入 TUI 界面
2. 在底部输入框输入问题并回车发送
3. 使用滚动键浏览历史消息

### 文件操作

```
读取 README.md 文件的内容
在项目中创建一个新的配置文件
```

### Shell 命令执行

```
查看当前目录的文件
统计代码行数
```

### 错误处理

```
读取一个不存在的文件
执行一个无效的命令
```

### 使用斜杠命令

```
/clear
/exit
```

## 高级技巧

### 多轮对话

Oxide 支持多轮对话，会记住之前的对话上下文：

```
你>[0] 什么是 Rust？
Rust 是一门系统级编程语言，注重安全性、并发性和性能...

你>[1] 它有哪些特点？
基于我们之前的讨论，Rust 的主要特点包括：所有权系统、零成本抽象、模式匹配...
```

### 工具链调用

AI 可以自动调用多个工具来完成复杂任务：

```
帮我检查项目的构建状态
```

### 文件批量操作

AI 可以批量处理多个文件：

```
统计项目中所有 .rs 文件的代码行数
```

## 故障排除

### 配置问题

**问题：启动时报错 "未找到 DEEPSEEK_API_KEY 环境变量"**

解决方案：
1. 设置环境变量：`export DEEPSEEK_API_KEY=your_key`
2. 或创建 `.env` 文件并添加：`DEEPSEEK_API_KEY=your_key`

**问题：打字机效果过慢或过快**

解决方案：
- 设置 `STREAM_CHARS_PER_TICK` 调整流式速度（例如 `export STREAM_CHARS_PER_TICK=12`）

**问题：API Key 验证失败**

解决方案：
- 确保 API Key 格式正确（以 `sk-` 开头）
- 检查 API Key 是否有效（登录 DeepSeek 控制台验证）

### 网络问题

**问题：API 请求超时**

解决方案：
- 检查网络连接
- 确认能够访问 https://api.deepseek.com
- 如果使用代理，请配置环境变量

### 终端问题

**问题：颜色显示异常**

解决方案：
- 确保终端支持 ANSI 颜色代码
- 某些终端可能需要启用颜色支持
- Windows 用户可能需要使用 Windows Terminal

**问题：Markdown 格式显示异常**

解决方案：
- Oxide 使用 `termimad` 库渲染 Markdown
- 确保终端宽度足够（建议 80 列以上）
- 如果表格格式错位，这是正常现象（表格以原始文本显示）
- 代码块需要灰色背景支持，某些终端配置可能需要调整

## Markdown 渲染功能

Oxide CLI 支持 AI 回复的实时 Markdown 渲染，包括：

### 支持的格式

- **标题** - `# 标题` 显示为青色
- **粗体** - `**粗体**` 显示为白色高亮
- **斜体** - `*斜体*` 显示为黄色
- **行内代码** - `` `代码` `` 显示为绿色
- **代码块** - 三反引号包围，带灰色背景
- **列表** - 支持 `-` 和 `*` 开头的列表

### 渲染效果

AI 回复时会自动渲染 Markdown：

```markdown
## 功能说明
这是 **重要内容** 和 `代码示例`

- 要点 1
- 要点 2

```
fn main() {
    println!("Hello");
}
```
```

会被实时渲染成彩色格式，提升阅读体验。

### 注意事项

- 表格 Markdown 语法会以原始文本显示（不渲染成表格）
- 渲染是逐行进行的，保持流式输出的响应速度
- 代码块使用背景色，需要终端支持

## 最佳实践

1. **定期清空对话历史**：如果对话历史过长，使用 `/clear` 重置会话
2. **使用环境变量管理配置**：推荐使用 `.env` 文件存储敏感信息
3. **保护 API Key**：不要将 `.env` 文件提交到版本控制系统
4. **定期更新**：关注项目更新，获取最新功能和修复

## 获取帮助

如果遇到问题，可以通过以下方式获取帮助：

- 查看项目 README.md
- 输入 `/help` 查看内置帮助
- 访问项目 GitHub Issues 页面
- 查阅 DeepSeek API 文档
