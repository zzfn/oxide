# @文件引用功能使用说明

## 功能概述

@文件引用功能允许你在对话中直接引用文件，系统会自动读取文件内容并注入到对话上下文中。

## 使用方法

### 基本用法

```
@文件路径 你的问题
```

例如：
```
@src/main.rs 请帮我重构这个文件
```

### 多个文件引用

```
@file1.rs @file2.toml 比较这两个文件
```

### 文件路径自动补全

1. 输入 `@` 触发补全
2. 继续输入路径，如 `@src/` 查看 src 目录
3. 使用 Tab 或方向键选择文件

```
@sr[TAB]  → 显示: @src/  @setup.rs  @Cargo.toml
@src/m[TAB]  → 显示: @src/main.rs  @src/cli/mod.rs
```

## 功能特性

- ✅ **动态文件路径补全** - 输入 @ 时自动显示当前目录文件
- ✅ **路径递归补全** - 支持 `@src/` 显示子目录
- ✅ **自动内容注入** - 文件内容自动添加到对话上下文
- ✅ **可视化反馈** - 显示已引用文件的大小和行数
- ✅ **多文件支持** - 一次引用多个文件
- ✅ **错误处理** - 文件不存在或过大时的友好提示

## 输出示例

```
📎 已引用文件:
  📎 src/main.rs (1234 bytes, 42 lines)
  📎 config.toml (256 bytes, 5 lines)
```

## 注意事项

- 文件路径支持相对路径和绝对路径
- 文件大小超过 1MB 时会显示警告
- 空文件会显示警告信息
- 隐藏文件（以 `.` 开头）不会在补全列表中显示

## 示例场景

### 代码审查
```
@src/cli/mod.rs 这个文件有什么可以改进的地方？
```

### 文件对比
```
@src/main.rs @src/old_main.rs 这两个文件有什么区别？
```

### 配置检查
```
@config.toml 请帮我检查这个配置文件是否有问题
```

### 文档编写
```
@README.md @docs/spec.md 帮我根据这两个文件生成 API 文档
```
