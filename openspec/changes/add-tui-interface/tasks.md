## 1. 基础架构
- [ ] 1.1 添加 TUI 相关依赖到 Cargo.toml (ratatui, crossterm, syntect)
- [ ] 1.2 创建 src/tui/ 模块目录结构
- [ ] 1.3 实现 TUI 框架初始化（Terminal, EventLoop）
- [ ] 1.4 添加 `--no-tui` CLI 参数支持

## 2. 界面布局
- [ ] 2.1 设计和实现主界面布局（顶部状态栏、中间消息区、底部输入区）
- [ ] 2.2 实现消息历史可滚动列表
- [ ] 2.3 实现输入框和多行输入支持
- [ ] 2.4 实现工具状态面板（可选显示/隐藏）

## 3. 消息渲染
- [ ] 3.1 实现文本消息渲染（支持换行、颜色）
- [ ] 3.2 实现代码块语法高亮（使用 syntect）
- [ ] 3.3 实现 Markdown 基本格式渲染（标题、列表、代码块）
- [ ] 3.4 区分用户消息、AI 响应、工具调用的视觉样式

## 4. 事件处理
- [ ] 4.1 实现键盘事件处理（输入、导航、命令执行）
- [ ] 4.2 实现异步事件系统（API 请求、工具执行）
- [ ] 4.3 实现状态更新通知机制
- [ ] 4.4 处理终端大小变化事件

## 5. 交互功能
- [ ] 5.1 实现斜杠命令系统（/help, /clear, /exit 等）
- [ ] 5.2 实现历史消息搜索和导航
- [ ] 5.3 实现消息复制功能（可选）
- [ ] 5.4 实现快捷键支持（Ctrl+C 中断、上下箭头历史等）

## 6. 集成测试
- [ ] 6.1 测试 TUI 模式基本流程
- [ ] 6.2 测试 `--no-tui` 回退模式
- [ ] 6.3 测试各种 Markdown 格式渲染
- [ ] 6.4 测试工具调用显示
- [ ] 6.5 测试错误处理和恢复

## 7. 文档和清理
- [ ] 7.1 更新 README.md 添加 TUI 功能说明
- [ ] 7.2 更新 USAGE.md 添加 TUI 使用指南
- [ ] 7.3 代码审查和优化
